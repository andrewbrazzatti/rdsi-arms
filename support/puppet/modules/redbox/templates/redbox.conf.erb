<VirtualHost <%= @server_id %>:80>

       DocumentRoot  <%= @docroot %>
       
       ErrorLog <%= @log_dir %>/error_log

       # Possible values include: debug, info, notice, warn, error, crit,
       # alert, emerg.
       LogLevel warn
       
     <% if @is_shibboleth_active -%>
       ProxyPassMatch /Shibboleth !
	   ProxyPass /default/sso/shibbloeth !
	 <% end -%>
	   
       ProxyPass               /mint <%= @mint_path %>
       ProxyPassReverse        /mint <%= @mint_path %>
	   
       ProxyPass               / <%= @redbox_path %>
       ProxyPassReverse        / <%= @redbox_path %>

	<% if @is_shibboleth_active -%>
       <Location /default/sso/shibboleth>
          AuthType shibboleth
          ShibRequireSession On
          require valid-user
       </Location>
    <% end -%>
</VirtualHost>